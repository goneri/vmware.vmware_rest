
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How to modify a virtual machine &#8212; vmware_rest examples  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to run a virtual machine" href="run_a_vm.html" />
    <link rel="prev" title="Retrieve information from a specific VM" href="vm_info.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="how-to-modify-a-virtual-machine">
<span id="vmware-rest-vm-hardware-tuning"></span><h1>How to modify a virtual machine<a class="headerlink" href="#how-to-modify-a-virtual-machine" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id10">Introduction</a></p></li>
<li><p><a class="reference internal" href="#scenario-requirements" id="id11">Scenario requirements</a></p></li>
<li><p><a class="reference internal" href="#how-to-add-a-cdrom-drive-to-a-virtual-machine" id="id12">How to add a CDROM drive to a virtual machine</a></p>
<ul>
<li><p><a class="reference internal" href="#add-a-new-sata-adapter" id="id13">Add a new SATA adapter</a></p></li>
<li><p><a class="reference internal" href="#result" id="id14">Result</a></p></li>
<li><p><a class="reference internal" href="#add-a-cdrom-drive" id="id15">Add a CDROM drive</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id16">Result</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-attach-a-vm-to-a-network" id="id17">How to attach a VM to a network</a></p>
<ul>
<li><p><a class="reference internal" href="#attach-a-new-nic" id="id18">Attach a new NIC</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id19">Result</a></p></li>
<li><p><a class="reference internal" href="#adjust-the-configuration-of-the-nic" id="id20">Adjust the configuration of the NIC</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id21">Result</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#increase-the-memory-of-the-vm" id="id22">Increase the memory of the VM</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id23">Result</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#upgrade-the-hardware-version-of-the-vm" id="id24">Upgrade the hardware version of the VM</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id25">Result</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#adjust-the-number-of-cpus-of-the-vm" id="id26">Adjust the number of CPUs of the VM</a></p>
<ul>
<li><p><a class="reference internal" href="#id6" id="id27">Result</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#remove-a-sata-controller" id="id28">Remove a SATA controller</a></p>
<ul>
<li><p><a class="reference internal" href="#id7" id="id29">Result</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#attach-a-floppy-drive" id="id30">Attach a floppy drive</a></p>
<ul>
<li><p><a class="reference internal" href="#id8" id="id31">Result</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#attach-a-new-disk" id="id32">Attach a new disk</a></p>
<ul>
<li><p><a class="reference internal" href="#id9" id="id33">Result</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id10">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This section shows you how to use Ansible to modify an existing virtual machine.</p>
</div>
<div class="section" id="scenario-requirements">
<h2><a class="toc-backref" href="#id11">Scenario requirements</a><a class="headerlink" href="#scenario-requirements" title="Permalink to this headline">¶</a></h2>
<p>You’ve already followed <a class="reference internal" href="create_vm.html#vmware-rest-create-vm"><span class="std std-ref">How to create a Virtual Machine</span></a> and created a VM.</p>
</div>
<div class="section" id="how-to-add-a-cdrom-drive-to-a-virtual-machine">
<h2><a class="toc-backref" href="#id12">How to add a CDROM drive to a virtual machine</a><a class="headerlink" href="#how-to-add-a-cdrom-drive-to-a-virtual-machine" title="Permalink to this headline">¶</a></h2>
<p>In this example, we use the <code class="docutils literal notranslate"><span class="pre">vcenter_vm_hardware_*</span></code> modules to add a new CDROM to an existing VM.</p>
<div class="section" id="add-a-new-sata-adapter">
<h3><a class="toc-backref" href="#id13">Add a new SATA adapter</a><a class="headerlink" href="#add-a-new-sata-adapter" title="Permalink to this headline">¶</a></h3>
<p>First we create a new SATA adapter. We specify the <code class="docutils literal notranslate"><span class="pre">pci_slot_number</span></code>. This way if we run the task again it won’t do anything if there is already an adapter there.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Create</span> <span class="n">a</span> <span class="n">SATA</span> <span class="n">adapter</span> <span class="n">at</span> <span class="n">PCI</span> <span class="n">slot</span> <span class="mi">34</span>
  <span class="n">vcenter_vm_hardware_adapter_sata</span><span class="p">:</span>
    <span class="n">vm</span><span class="p">:</span> <span class="s1">&#39;{{ test_vm1_info.id }}&#39;</span>
    <span class="n">pci_slot_number</span><span class="p">:</span> <span class="mi">34</span>
  <span class="n">register</span><span class="p">:</span> <span class="n">_sata_adapter_result_1</span>
</pre></div>
</div>
</div>
<div class="section" id="result">
<h3><a class="toc-backref" href="#id14">Result</a><a class="headerlink" href="#result" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bus&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;pci_slot_number&quot;</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span>
        <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;SATA controller 0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;AHCI&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;15000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="add-a-cdrom-drive">
<h3><a class="toc-backref" href="#id15">Add a CDROM drive</a><a class="headerlink" href="#add-a-cdrom-drive" title="Permalink to this headline">¶</a></h3>
<p>Now we can create the CDROM drive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Attach</span> <span class="n">an</span> <span class="n">ISO</span> <span class="n">image</span> <span class="n">to</span> <span class="n">a</span> <span class="n">guest</span> <span class="n">VM</span>
  <span class="n">vcenter_vm_hardware_cdrom</span><span class="p">:</span>
    <span class="n">vm</span><span class="p">:</span> <span class="s1">&#39;{{ test_vm1_info.id }}&#39;</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">SATA</span>
    <span class="n">sata</span><span class="p">:</span>
      <span class="n">bus</span><span class="p">:</span> <span class="mi">0</span>
      <span class="n">unit</span><span class="p">:</span> <span class="mi">2</span>
    <span class="n">start_connected</span><span class="p">:</span> <span class="n">true</span>
    <span class="n">backing</span><span class="p">:</span>
      <span class="n">iso_file</span><span class="p">:</span> <span class="s1">&#39;[ro_datastore] fedora.iso&#39;</span>
      <span class="nb">type</span><span class="p">:</span> <span class="n">ISO_FILE</span>
  <span class="n">register</span><span class="p">:</span> <span class="n">_result</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id16">Result</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;start_connected&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
        <span class="s2">&quot;backing&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;iso_file&quot;</span><span class="p">:</span> <span class="s2">&quot;[ro_datastore] fedora.iso&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ISO_FILE&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;allow_guest_control&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;CD/DVD drive 1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;NOT_CONNECTED&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;SATA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;bus&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;16002&quot;</span><span class="p">,</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-to-attach-a-vm-to-a-network">
<span id="vmware-rest-attach-a-network"></span><h2><a class="toc-backref" href="#id17">How to attach a VM to a network</a><a class="headerlink" href="#how-to-attach-a-vm-to-a-network" title="Permalink to this headline">¶</a></h2>
<div class="section" id="attach-a-new-nic">
<h3><a class="toc-backref" href="#id18">Attach a new NIC</a><a class="headerlink" href="#attach-a-new-nic" title="Permalink to this headline">¶</a></h3>
<p>Here we attach the VM to the network (through the portgroup). We specify a <code class="docutils literal notranslate"><span class="pre">pci_slot_number</span></code> for the same reason.</p>
<p>The second task adjusts the NIC configuration.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Attach</span> <span class="n">a</span> <span class="n">VM</span> <span class="n">to</span> <span class="n">a</span> <span class="n">dvswitch</span>
  <span class="n">vcenter_vm_hardware_ethernet</span><span class="p">:</span>
    <span class="n">vm</span><span class="p">:</span> <span class="s1">&#39;{{ test_vm1_info.id }}&#39;</span>
    <span class="n">pci_slot_number</span><span class="p">:</span> <span class="mi">4</span>
    <span class="n">backing</span><span class="p">:</span>
      <span class="nb">type</span><span class="p">:</span> <span class="n">DISTRIBUTED_PORTGROUP</span>
      <span class="n">network</span><span class="p">:</span> <span class="s2">&quot;{{ my_portgroup_info.dvs_portgroup_info.dvswitch1[0].key }}&quot;</span>
    <span class="n">start_connected</span><span class="p">:</span> <span class="n">false</span>
  <span class="n">register</span><span class="p">:</span> <span class="n">_vm_hardware_ethernet_1</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id19">Result</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;start_connected&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;pci_slot_number&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;backing&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;connection_cookie&quot;</span><span class="p">:</span> <span class="mi">887401992</span><span class="p">,</span>
            <span class="s2">&quot;distributed_switch_uuid&quot;</span><span class="p">:</span> <span class="s2">&quot;50 33 0a 37 1b b6 0a a5-0c 86 08 26 2e 9a fa df&quot;</span><span class="p">,</span>
            <span class="s2">&quot;distributed_port&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;DISTRIBUTED_PORTGROUP&quot;</span><span class="p">,</span>
            <span class="s2">&quot;network&quot;</span><span class="p">:</span> <span class="s2">&quot;dvportgroup-1258&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;mac_address&quot;</span><span class="p">:</span> <span class="s2">&quot;00:50:56:b3:7a:1d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mac_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ASSIGNED&quot;</span><span class="p">,</span>
        <span class="s2">&quot;allow_guest_control&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;wake_on_lan_enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;Network adapter 1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;NOT_CONNECTED&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;VMXNET3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;upt_compatibility_enabled&quot;</span><span class="p">:</span> <span class="n">false</span>
    <span class="p">},</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;4000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="adjust-the-configuration-of-the-nic">
<h3><a class="toc-backref" href="#id20">Adjust the configuration of the NIC</a><a class="headerlink" href="#adjust-the-configuration-of-the-nic" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Turn</span> <span class="n">the</span> <span class="n">NIC</span><span class="s1">&#39;s start_connected flag on</span>
  <span class="n">vcenter_vm_hardware_ethernet</span><span class="p">:</span>
    <span class="n">nic</span><span class="p">:</span> <span class="s1">&#39;{{ _vm_hardware_ethernet_1.id }}&#39;</span>
    <span class="n">start_connected</span><span class="p">:</span> <span class="n">true</span>
    <span class="n">vm</span><span class="p">:</span> <span class="s1">&#39;{{ test_vm1_info.id }}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id21">Result</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;4000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="increase-the-memory-of-the-vm">
<h2><a class="toc-backref" href="#id22">Increase the memory of the VM</a><a class="headerlink" href="#increase-the-memory-of-the-vm" title="Permalink to this headline">¶</a></h2>
<p>We can also adjust the amount of memory that we dedicate to our VM.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Increase</span> <span class="n">the</span> <span class="n">memory</span> <span class="n">of</span> <span class="n">a</span> <span class="n">VM</span>
  <span class="n">vcenter_vm_hardware_memory</span><span class="p">:</span>
    <span class="n">vm</span><span class="p">:</span> <span class="s1">&#39;{{ test_vm1_info.id }}&#39;</span>
    <span class="n">size_MiB</span><span class="p">:</span> <span class="mi">1080</span>
  <span class="n">register</span><span class="p">:</span> <span class="n">_result</span>
</pre></div>
</div>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id23">Result</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="upgrade-the-hardware-version-of-the-vm">
<h2><a class="toc-backref" href="#id24">Upgrade the hardware version of the VM</a><a class="headerlink" href="#upgrade-the-hardware-version-of-the-vm" title="Permalink to this headline">¶</a></h2>
<p>Here we use the <code class="docutils literal notranslate"><span class="pre">vcenter_vm_hardware</span></code> module to upgrade the version of the hardware:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Upgrade</span> <span class="n">the</span> <span class="n">VM</span> <span class="n">hardware</span> <span class="n">version</span>
  <span class="n">vcenter_vm_hardware</span><span class="p">:</span>
    <span class="n">upgrade_policy</span><span class="p">:</span> <span class="n">AFTER_CLEAN_SHUTDOWN</span>
    <span class="n">upgrade_version</span><span class="p">:</span> <span class="n">VMX_13</span>
    <span class="n">vm</span><span class="p">:</span> <span class="s1">&#39;{{ test_vm1_info.id }}&#39;</span>
  <span class="n">register</span><span class="p">:</span> <span class="n">_result</span>
</pre></div>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id25">Result</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="adjust-the-number-of-cpus-of-the-vm">
<h2><a class="toc-backref" href="#id26">Adjust the number of CPUs of the VM</a><a class="headerlink" href="#adjust-the-number-of-cpus-of-the-vm" title="Permalink to this headline">¶</a></h2>
<p>You can use <code class="docutils literal notranslate"><span class="pre">vcenter_vm_hardware_cpu</span></code> for that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Dedicate</span> <span class="n">one</span> <span class="n">core</span> <span class="n">to</span> <span class="n">the</span> <span class="n">VM</span>
  <span class="n">vcenter_vm_hardware_cpu</span><span class="p">:</span>
    <span class="n">vm</span><span class="p">:</span> <span class="s1">&#39;{{ test_vm1_info.id }}&#39;</span>
    <span class="n">count</span><span class="p">:</span> <span class="mi">1</span>
  <span class="n">register</span><span class="p">:</span> <span class="n">_result</span>
</pre></div>
</div>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id27">Result</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;hot_remove_enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;hot_add_enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;cores_per_socket&quot;</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">},</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="remove-a-sata-controller">
<h2><a class="toc-backref" href="#id28">Remove a SATA controller</a><a class="headerlink" href="#remove-a-sata-controller" title="Permalink to this headline">¶</a></h2>
<p>In this example, we remove the SATA controller of the PCI slot 34.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id29">Result</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="attach-a-floppy-drive">
<h2><a class="toc-backref" href="#id30">Attach a floppy drive</a><a class="headerlink" href="#attach-a-floppy-drive" title="Permalink to this headline">¶</a></h2>
<p>Here we attach a floppy drive to a VM.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Add</span> <span class="n">a</span> <span class="n">floppy</span> <span class="n">disk</span> <span class="n">drive</span>
  <span class="n">vcenter_vm_hardware_floppy</span><span class="p">:</span>
    <span class="n">vm</span><span class="p">:</span> <span class="s1">&#39;{{ test_vm1_info.id }}&#39;</span>
    <span class="n">allow_guest_control</span><span class="p">:</span> <span class="n">true</span>
  <span class="n">register</span><span class="p">:</span> <span class="n">my_floppy_drive</span>
</pre></div>
</div>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id31">Result</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;start_connected&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;backing&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;auto_detect&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;HOST_DEVICE&quot;</span><span class="p">,</span>
            <span class="s2">&quot;host_device&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;allow_guest_control&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
        <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;Floppy drive 1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;NOT_CONNECTED&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;8000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="attach-a-new-disk">
<h2><a class="toc-backref" href="#id32">Attach a new disk</a><a class="headerlink" href="#attach-a-new-disk" title="Permalink to this headline">¶</a></h2>
<p>Here we attach a tiny disk to the VM. The <code class="docutils literal notranslate"><span class="pre">capacity</span></code> is in bytes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">disk</span>
  <span class="n">vcenter_vm_hardware_disk</span><span class="p">:</span>
    <span class="n">vm</span><span class="p">:</span> <span class="s1">&#39;{{ test_vm1_info.id }}&#39;</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">SATA</span>
    <span class="n">new_vmdk</span><span class="p">:</span>
      <span class="n">capacity</span><span class="p">:</span> <span class="mi">320000</span>
  <span class="n">register</span><span class="p">:</span> <span class="n">my_new_disk</span>
</pre></div>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id33">Result</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;backing&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;vmdk_file&quot;</span><span class="p">:</span> <span class="s2">&quot;[rw_datastore] test_vm1_1/test_vm1_1.vmdk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;VMDK_FILE&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;Hard disk 2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;SATA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;bus&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">},</span>
        <span class="s2">&quot;capacity&quot;</span><span class="p">:</span> <span class="mi">320000</span>
    <span class="p">},</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;16000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;changed&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">vmware_rest examples</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">vmware.vmware_rest documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../guide_vmware_rest.html">VMware REST Scenarios</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs.html">Manual of the vmware.vmware_rest modules</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../guide_vmware_rest.html">VMware REST Scenarios</a><ul>
      <li>Previous: <a href="vm_info.html" title="previous chapter">Retrieve information from a specific VM</a></li>
      <li>Next: <a href="run_a_vm.html" title="next chapter">How to run a virtual machine</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Ansible contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/vmware_rest_scenarios/vm_hardware_tuning.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>